version: '3.8'

services:
  social-neo4j:
    image: neo4j:5.15.0  # Sử dụng bản 5.x ổn định (hoặc neo4j:latest)
    container_name: social-neo4j
    ports:
      - "7474:7474" # Cổng HTTP (để truy cập giao diện quản lý trên trình duyệt)
      - "7687:7687" # Cổng Bolt (để Spring Boot kết nối - đây là cổng bị lỗi)
    environment:
      # Cấu hình mật khẩu khớp với application.properties của bạn
      - NEO4J_AUTH=neo4j/password
      # Tùy chọn: Tắt yêu cầu đổi mật khẩu lần đầu
      - NEO4J_dbms_security_auth__enabled=true
    volumes:
      # Map dữ liệu ra ngoài máy thật để không bị mất khi tắt container
      - ./neo4j_data:/data
      - ./neo4j_logs:/logs
    restart: always